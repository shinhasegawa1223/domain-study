# システム分割の考え方

DDDにおける**境界づけられたコンテキスト（Bounded Context）** の考え方を、フードデリバリーサービスを例に説明します。

---

## 🍕 フードデリバリーサービスの例

### ❌ 悪い例：全部一つのシステム

```
フードデリバリーシステム
    ├── 注文管理
    ├── メニュー検索
    ├── レストラン情報
    ├── 配達員管理
    ├── ポイント管理
    └── 決済処理
```

→ 全部まとめると責任が曖昧になり、変更が困難に...

---

### ✅ 良い例：責任ごとにシステムを分離

```
┌─────────────────────────────────────────────────────────────┐
│  🍽️ レストラン管理システム                                  │
│    ├── メニュー検索（料理を探す）                           │
│    ├── レストラン情報管理（店舗情報・営業時間）              │
│    └── メニュー推薦（おすすめ料理の提案）                   │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│  🛒 注文管理システム                                        │
│    ├── カート管理（注文内容の管理）                         │
│    └── 注文履歴（過去の注文確認）                           │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│  👤 顧客管理システム                                        │
│    ├── 会員情報管理（住所・連絡先）                         │
│    └── ポイント管理（ポイント付与・利用）                   │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│  💳 決済システム                                            │
│    ├── 決済処理（クレカ・電子マネー）                       │
│    └── 返金処理                                             │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│  🚴 配達管理システム                                        │
│    ├── 配達員管理（配達員の稼働状況）                       │
│    ├── 配達ルート最適化                                     │
│    └── 配達追跡（リアルタイム位置情報）                     │
└─────────────────────────────────────────────────────────────┘
```

---


### イメージ
![システム分割の概念図](../pic/system_separation.png)


## 🎯 なぜこう分けるのか？

| 観点 | 説明 |
|------|------|
| **独立性** | 決済システムを変更しても、レストラン管理には影響しない |
| **チーム分担** | 各システムを別チームが担当できる |
| **スケーラビリティ** | 注文が増えたら注文管理だけスケールアップ |
| **専門性** | 決済は決済の専門知識、配達は物流の専門知識が必要 |

---

## 📝 システム分割のポイント

1. **ビジネスの関心事で分ける** - 技術的な都合ではなく、業務の責任範囲で分割
2. **変更の頻度で分ける** - よく変わる部分と安定している部分を分離
3. **チーム構成を考慮** - 1チーム = 1システムが理想的（コンウェイの法則）
4. **データの所有者を明確に** - 各システムが管理するデータを明確にする
